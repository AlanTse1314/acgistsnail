欢迎使用Snail（蜗牛）

如果遇到其他问题或者建议请提交[Issues](https://gitee.com/acgist/snail/issues)

## 目录

* [隐私](#隐私)
	* [你的行为](#你的行为)
* [使用帮助](#使用帮助)
	* [使用](#使用)
		* [环境](#环境)
		* [编译](#编译)
		* [运行](#运行)
		* [进阶](#进阶)
	* [BT任务](#bt任务)
		* [BT任务无法下载](#bt任务无法下载)
		* [分享](#分享)
		* [无法分享](#无法分享)
		* [私有种子](#私有种子)
	* [磁力链接任务](#磁力链接任务)
		* [磁力链接原理](#磁力链接原理)
		* [磁力链接任务无法下载](#磁力链接任务无法下载)
		* [没有速度](#没有速度)
	* [内网穿透](#内网穿透)
		* [内网穿透原理](#内网穿透原理)
		* [UPNP映射失败原因](#upnp映射失败原因)
	* [优化下载体验](#优化下载体验)
		* [自定义Tracker服务器](#自定义tracker服务器)
		* [自定义DHT网络](#自定义dht网络)
* [开发帮助](#开发帮助)
	* [系统消息](#系统消息)
	* [系统通知](#系统通知)
	* [后台模式](#后台模式)
		* [进入后台模式](#进入后台模式)

## 隐私

* 除了下载任务以外不会采集其他任何信息
* 除了用于必要的下载和上传任务而进行数据传输，不会有其他任何的数据传输

### 你的行为

*谁可能知道你的下载任务？*

* 运营商
* 连接的Peer
* 连接的DHT节点
* 连接的FTP服务器
* 连接的HTTP服务器
* 连接的Tracker服务器
* 局域网内的本地发现服务

## 使用帮助

### 使用

#### 环境

Java：11+  
Maven：3.6.0+  
系统支持：win、mac、linux

#### 编译

```
mvn clean package -P release -D skipTests
```

> 编译系统和运行系统不一致时，添加参数：-D javafx.platform=win|mac|linux

#### 运行

```
java -server -Xms128m -Xmx256m -jar snail-{version}.jar
```

> HTTP下载大文件时，建议优化JVM参数`-XX:NewRatio=2 -XX:SurvivorRatio=2`

```
java -server -Xms128m -Xmx256m -XX:NewRatio=2 -XX:SurvivorRatio=2 -jar snail-{version}.jar
```

> Window使用`javaw`替换`java`

#### 进阶

F1：反馈&帮助

F12：统计面板

下载界面、添加任务界面支持拖入资源：下载链接、种子文件

### BT任务

BT任务需要用户提供种子文件（.torrent）

#### BT任务无法下载

* 网络故障
* 无人分享（做种）
* 查找不到Peer（没有可用的Tracker服务器和DHT网络）

#### 分享

BT任务上传速度是下载速度的四分之一，任务只要开始下载都会进行分享，直到软件关闭或者任务被删除。

#### 无法分享

* 是否处于多路由环境
* 是否接入了多条网络
* 是否开启路由器UPNP功能

> 不能自动设置UPNP功能的用户，请查看是否在网卡设置里面固定了IP地址，修改为自动获取再试一试。

#### 私有种子

私有种子下载支持以下特性：

* 只使用种子本身自带的Tracker服务器
* 不使用Pex交换
* 不使用DHT网络
* 不使用本地发现服务

### 磁力链接任务

磁力链接任务需要用户提供磁力链接：32位磁力链接HASH、40位磁力链接HASH、完整磁力链接

#### 磁力链接原理

磁力链接下载使用Tracker服务器和DHT网络先加载Peer，然后连接Peer进行种子交换，然后转为BT任务进行下载。  

#### 磁力链接任务无法下载

* 磁力链接错误
* 磁力链接没有自带Tracker服务器并且没有配置Tracker服务器和DHT网络

#### 没有速度

磁力链接下载即使配置了Tracker服务器和DHT网络，磁力链接在转种子过程中，还是会出现长时间查找Peer导致的等待。

### 内网穿透

内网穿透主要是为了实现上传功能，不实现理论上不影响下载功能，事实证明还是有影响的。

既然别人给我们分享，我们也应该无私的分享给其他人，做一个有种的男人。

#### 内网穿透原理

主要使用技术：UPNP、STUN

1. 使用UPNP映射端口，UPNP支持：TCP、UDP
2. 如果UPNP映射失败，使用STUN实现穿透，STUN支持：UDP

#### UPNP映射失败原因

1. 处于多重路由环境
2. 路由器关闭UPNP功能
3. 客户端主机没有自动获取IP
4. 其他错误原因

### 优化下载体验

使用热门种子下载，自定义优质的Tracker服务器和DHT网络。

#### 自定义Tracker服务器

在软件根目录创建文件/config/bt.tracker.properties，配置键值对：index=AnnounceUrl

> index=任意值

> AnnounceUrl=Tracker服务器地址

优质Tracker服务器获取：[trackerslist](https://github.com/ngosang/trackerslist)

#### 自定义DHT网络

在软件根目录创建文件/config/bt.dht.properties，配置键值对：NodeID=host:port

> NodeID=节点ID

> host:port=服务器地址（域名|IP）:端口

## 开发帮助

### 系统消息

通过系统消息可以实现系统管理和任务管理

* 文本
* 关闭连接
* 唤醒窗口
* 关闭程序
* 新建任务
* 任务列表
* 删除任务
* 开始任务
* 暂停任务
* 响应

### 系统通知

接入扩展GUI后，可以收到系统通知。

* 提示窗口
* 提示消息
* 刷新（任务）

### 后台模式

后台模式运行时，不使用自带GUI界面，可以通过[系统消息](#系统消息)和[系统通知](#系统通知)来完成系统管理和任务管理。

#### 进入后台模式

启动命令后面第一个参数：

* gui=本地GUI
* daemo=后台模式

```
java -server -Xms128m -Xmx256m -jar snail-{version}.jar [gui|daemo]
```